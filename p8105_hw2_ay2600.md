Data Science HW 2
================
Hingling Yu
10/01/2023

## Problem 0

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
library(janitor)
```

    ## 
    ## Attaching package: 'janitor'
    ## 
    ## The following objects are masked from 'package:stats':
    ## 
    ##     chisq.test, fisher.test

``` r
library(dplyr)
```

## Problem 1

### First Step: Cleaning `pols-month.csv`

``` r
pols = 
  read_csv("data/data_fivethirtyeight/pols-month.csv") %>% #import the `pols-month.csv` file
  separate(mon, into = c("year", "month", "day"), sep = "-") %>% # split the mon column into three columns: year, month, day using "="
  mutate(
    month = month.name[as.numeric(month)], # converts numeric month values to full month names
    president = ifelse(prez_gop == 1, "gop", "dem"), # creates a new variable president, assign 'gop' if prez_gop = 1, otherwise assign 'dem'
    year = as.numeric(year)
  ) %>% 
  select(year, month, everything(), -day, -starts_with("prez")) # select all variables except 'day' and everything starts with 'prez'
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### Second Step: Cleaning `snp.csv`

``` r
snp = 
  read_csv("data/data_fivethirtyeight/snp.csv") %>% #import the `snp.csv` file
  separate(date, into = c("month", "day", "year"), sep = "/") %>% # split the data column into three columns: month, day, year using "/"
  mutate(
    month = month.name[as.numeric(month)], 
    year = as.numeric(year),
    year = ifelse(year < 50, year + 2000, year + 1900) # add 2000 to years value less than 50, 1900 to years value greater or equal to 50
  ) %>% #converts numeric month to full month names
  select(year, month, close, -day) # rearrange the columns so "year" and "month" at first, then "close". Remove "day"
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### Third Step: Tidy `umeployment.csv`

``` r
unemployment = 
  read_csv("data/data_fivethirtyeight/unemployment.csv") %>%  #import the `unemployment.csv`
  rename(year = Year) %>% # rename 'Year' column to 'year'
  pivot_longer(
    Jan:Dec, # convert from wide to long
    names_to = "month", # names of the columns into a new column named 'month'
    values_to = "unemployment_rate"# values of the columns into a new column named 'unemployment_rate'
    ) %>% 
  mutate(
    month = month.name[match(month, month.abb)],
    year = as.numeric(year)
    ) %>% # finds the position of each month abbreviation name in month.abb vector then concert these month abbreviation names to full month names
  select(year, month, unemployment_rate) 
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### Last Step: Merge three datasets

``` r
data_538 =
  left_join(pols, snp) %>% 
  left_join(unemployment)
```

    ## Joining with `by = join_by(year, month)`
    ## Joining with `by = join_by(year, month)`

## Problem 2

### Clean Mr.Trash Wheel

``` r
mr_trash_wheel =
  read_excel("data/data_trashwheel/trash_wheel_collection.xlsx", sheet = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  select(-x15,-x16) %>% 
  mutate(
    homes_powered = (weight_tons * 500) / 30,
    wheel_name = "Mr. Trash Wheel",
    year = as.numeric(year)
  )
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

### Clean Professor. Trash Wheel

``` r
prof_trash_wheel =
  read_excel("data/data_trashwheel/trash_wheel_collection.xlsx",sheet = 2) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    homes_powered = (weight_tons * 500) / 30,
    wheel_name = "Professor Trash Wheel",
    year = as.numeric(year)
  )
```

### Clean Gwynnda Trash Wheel

``` r
gwy_trash_wheel = 
  read_excel("data/data_trashwheel/trash_wheel_collection.xlsx", sheet = 4) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    homes_powered = (weight_tons * 500) / 30,
    wheel_name = "Gwynnda Trash Wheel",
    year = as.numeric(year)
  )
```

### Combine all `mr_trash_wheel`, `prof_trash_wheel`, and \`gwy_trash_wheel

``` r
trash_wheel_combine = 
  bind_rows(mr_trash_wheel, prof_trash_wheel, gwy_trash_wheel)
```

## Problem 3

``` r
mci_baseline = 
  read_csv("data/data_mci/mci_baseline.csv", skip = 1, na = ".") %>% 
  janitor::clean_names() %>%
  drop_na(age_at_onset) %>% 
  mutate(
    sex = ifelse(sex == 1, "Male", "Female"),
    apoe4 = ifelse(apoe4 == 1, "Carrier", "Non carrier"),
    age_at_onset = as.numeric(age_at_onset)
  )
```

    ## Rows: 483 Columns: 6
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (6): ID, Current Age, Sex, Education, apoe4, Age at onset
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### Below is the full version of mci_baseline regardless of mci or not for the description use

``` r
mci_baseline_full = 
  read_csv("data/data_mci/mci_baseline.csv", skip = 1, na = ".") %>% 
  janitor::clean_names() %>%
  mutate(
    sex = ifelse(sex == 1, "Male", "Female"),
    apoe4 = ifelse(apoe4 == 1, "Carrier", "Non carrier"),
    age_at_onset = as.numeric(age_at_onset)
  )
```

    ## Rows: 483 Columns: 6
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (6): ID, Current Age, Sex, Education, apoe4, Age at onset
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### Description of `mci_baseline`

There are a total of 483 participants were recruited for the study. Of
these participants, 97 participants developed MCI. The average baseline
age is 65.05. Among the women in the study, 29.86% are APOE4 carriers.
